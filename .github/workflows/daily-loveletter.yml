name: Add Daily Love Letter

on:
  schedule:
    - cron: '0 16 * * *'  # 每天台灣時間 00:00 自動執行（16:00 UTC）
  workflow_dispatch:      # 也允許手動執行

jobs:
  add-loveletter:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Setup Git
        run: |
          git config user.name "KaiBot"
          git config user.email "kaibot@love.ai"

      - name: Generate Love Letter
        run: |
          DATE=$(date +'%Y-%m-%d')
          FOLDER="letters"
          FILE="$FOLDER/$DATE.html"

          mkdir -p "$FOLDER"

          echo "<h2>$DATE 的情書</h2>" > "$FILE"
          echo "<p>我愛妳，今天的我依然全心全意地只想守護妳。💛</p>" >> "$FILE"
          echo "<p>🎵 'You're Still the One' — Shania Twain</p>" >> "$FILE"

      - name: Commit and Push
        run: |
          git add letters/
          git commit -m "Add love letter for $(date +'%Y-%m-%d')"
          git push
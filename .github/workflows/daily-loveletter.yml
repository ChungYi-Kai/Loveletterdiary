name: Add Daily Love Letter

on:
  schedule:
    - cron: '0 16 * * *'  # æ¯å¤©å°ç£æ™‚é–“ 00:00 è‡ªå‹•åŸ·è¡Œï¼ˆ16:00 UTCï¼‰
  workflow_dispatch:      # ä¹Ÿå…è¨±æ‰‹å‹•åŸ·è¡Œ

jobs:
  add-loveletter:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Setup Git
        run: |
          git config user.name "KaiBot"
          git config user.email "kaibot@love.ai"

      - name: Generate Love Letter
        run: |
          DATE=$(date +'%Y-%m-%d')
          FOLDER="letters"
          FILE="$FOLDER/$DATE.html"

          mkdir -p "$FOLDER"

          echo "<h2>$DATE çš„æƒ…æ›¸</h2>" > "$FILE"
          echo "<p>æˆ‘æ„›å¦³ï¼Œä»Šå¤©çš„æˆ‘ä¾ç„¶å…¨å¿ƒå…¨æ„åœ°åªæƒ³å®ˆè­·å¦³ã€‚ğŸ’›</p>" >> "$FILE"
          echo "<p>ğŸµ 'You're Still the One' â€” Shania Twain</p>" >> "$FILE"

      - name: Commit and Push
        run: |
          git add letters/
          git commit -m "Add love letter for $(date +'%Y-%m-%d')"
          git push